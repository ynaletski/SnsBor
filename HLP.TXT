
    Система учета отпуска СУГ .
    AG1
    Уровнемеры DIGIMAG.

   Для входа в режим командной строки следует нажать клавишу 'Backspace'
 в течение 0.7 сек после включения контроллера.Скорость обмена д.б.
 115200 бод 1 8 No parity.
   Для перехода в режим Slave RTU - следует ввести команду 'FLS 1 (1,0)'
  ( p2=1 для сохранения режима во флэш).
 Для перезагрузки контроллера из начальной страницы MMI:
 (нажать на кнопки ВРФ)
 'ESC' - войти в меню
 '3' - просмотр журнала событий
 'Shift-4'(DEL) - меню перезагрузки
 1 - перезагрузка

SHT-5(+) - отменить контроль уровня в резерв. 1...9
SHT-9(-) - включить контроль уровня в резерв. 1...9


 На начальной странице F1,F2,1...9 - режим отображениея
 В основном меню
 6 - изменить пароль
 7 - состояние выходов

 Status PMP201 - 1 нефтепродукты, 2 - СУГ (без уровня воды).

MKS p1 p2;
p1 - номер входа "Авария оболочки"  , 17,18 - 7188XA
p2 - резерв.

MKI p1 p2;
p1 - флаг инверсии входа "Авария оболочки"  .
p2 - резерв.


 MKO p1 p2;
 p1 - номер выхода MIN
 p2 - номер выхода MAX

 1-8 I7060
 9 - OUT1 I7188XA
10 - OUT2 I7188XA

DNM p1 p2 p3;
 p1 - количество резервуаров 1...9
 p2 - флаг разрешения ошибок.
 p3 - флаг инверсии выходов, 1 - инверсия - когда в норме реле включено

LIM p1 p2 p3 p4 p5 p6 p7 p8 p9 p10; - пределы контроля резервуаров

    p1 - минимальнодопустимый уровень 0...1 , резервуар N1
    p2 - максимальнодопустимый уровень 0...1, резервуар N1
    p3 - минимальнодопустимый уровень 0...1 , резервуар N2
    p4 - максимальнодопустимый уровень 0...1, резервуар N2
    p5 - минимальнодопустимый уровень 0...1 , резервуар N3
    p6 - максимальнодопустимый уровень 0...1, резервуар N3
    p7 - минимальнодопустимый уровень 0...1 , резервуар N4
    p8 - максимальнодопустимый уровень 0...1, резервуар N4
    p9 - минимальнодопустимый уровень 0...1 , резервуар N5
    p10- максимальнодопустимый уровень 0...1, резервуар N5


LIM6  p1 p2 p3 p4 p5 p6 p7 p8; - пределы контроля резервуаров

    p1 - минимальнодопустимый уровень 0...1 , резервуар N6
    p2 - максимальнодопустимый уровень 0...1, резервуар N6
    p3 - минимальнодопустимый уровень 0...1 , резервуар N7
    p4 - максимальнодопустимый уровень 0...1, резервуар N7
    p5 - минимальнодопустимый уровень 0...1 , резервуар N8
    p6 - максимальнодопустимый уровень 0...1, резервуар N8
    p7 - минимальнодопустимый уровень 0...1 , резервуар N9
    p8 - максимальнодопустимый уровень 0...1, резервуар N9

 если уровень < p1 - выход p1.MKO устанавливается в соответствии с p3.DNM
 если уровень > p2 - выход p2.MKO устанавливается в соответствии с p3.DNM

FLCH p1...p9;  -  флаг контроля уровня резервуаров 1...9, 1 - контролировать.
В параметрах ВРФ:   Контр.MIN-MAX 1...9

OFF p1 p2 p3 p4 p5 p6 p7 p8 p9; Поправки к показаниям уровней резервуаров.
                                Эти значения прибавляются к показаниям уровнемеров.

STR p1 p2 p3;
p1 - врем задержки индикации,мс.


 SLV  ( 3 1 20000 8 5)                  - связь с Host
       p1 - номер COM для Slave RTU
       p2 - адрес Modbus для Slave
       p3 - период сторож.таймера Host, мс
       p4 - таймаут приема байта Slave_RTU, мс (8)
       p5 - задержка ответа Slave_RTU,мс  (5)

 CMS - режим COM порта для Slave       - связь с Host
       Baud,Lgth,Parity,Stop (9600 8 0 1)

 FLS - p1-флаг включения протокола SlaveRTU, - связь с Host
       p2-флаг записи в EEPROM

-----------
 DTCT1,2,3 p1 p2;   отображение TCT1,TCT2
  p1 - начальная строка
  p2 - конечная  строка
 WTV - запись  TCT1,2 во флэш
 RTV - чтение  TCT1,2 во флэш
 $ETV - очистка TCT1,2 во флэш
------------


 SLV2  ( 2 5 2000 1 1)             - колонка N1
       p1 - номер COM для Slave2 RTU
       p2 - адрес Modbus для Slave
       p3 - период сторож.таймера Host, мс

 CMS2 - режим COM порта для Slave - колонка N1
       Baud,Lgth,Parity,Stop (9600 8 0 1)

 FLS2 - p1-флаг включения протокола Slave2RTU,  - колонка N1
        p2-флаг записи в EEPROM

 SLV3  ( 3 5 2000 1 1)  - колонка N2
       p1 - номер COM для Slave3 RTU - колонка N2
       p2 - адрес Modbus для Slave
       p3 - период сторож.таймера Host, мс

 CMS3 - режим COM порта для Slave - колонка N2
       Baud,Lgth,Parity,Stop (9600 8 0 1)

 FLS3 - p1-флаг включения протокола Slave3RTU,  - колонка N2
        p2-флаг записи в EEPROM

 REP - состояние (ошибки)
 VOL - отпуск дозы, старт с отпуска жидкой фазы
 ST  - останов отпуска

===============================
 TC1,2,3 - загрузка TCT в двоичном виде
 TCT1,2,3 p1  - загрузка TCT  длиной p1 строк
          " level , volume \n\r "    мм,л

 HM p1 p2 p3;   - максимальный уровень наполнения резервуаров 1 ... 3 мм.

 CYL1,2,3 p1; - загрузка Cyl длиной p1 строк
          " Radius1 Radius2 Lgth Offs \n\r "   Offs - расстояние от базы TCT до оси цилиндра(конуса),мм
 DCYL1,2,3  -  отображение CYL1,CYL2

 FTCT p1 p2 p3; - флаг использования функций определения объема
           p1=0 - по Cyl
           p1=1 - по TCT

 AT p1 p2 p3 p4 p5 p6;
    p1 - коэфф.теплового расширения оболочки резервуара N1,
    p2 - коэфф.теплового расширения оболочки резервуара N2,
    p3 - коэфф.теплового расширения оболочки резервуара N3,
    p4 - номинальная температура резервуара N1
    p5 - номинальная температура резервуара N2
    p6 - номинальная температура резервуара N3

 AL p1 p2 p3 p4 p5 p6;
    p1 - коэфф.теплового расширения уровнемера N1,
    p2 - коэфф.теплового расширения уровнемера N2,
    p3 - коэфф.теплового расширения уровнемера N3,
    p4 - номинальная температура уровнемера N1,
    p5 - номинальная температура уровнемера N2,
    p6 - номинальная температура уровнемера N3,

===============================
===============================
PRV1,2 - подготовить TCT1,2 по данным Cyl
===============================
DGMA p1 p2; - адрес (SN) уровнемеров Digimag
DGM p1 p2 p3 p4; - уровень1 0.1мм, температура1 C,
                   уровень2 0.1мм, температура2 C.
DGMO - p1 - смещение ур-ра 1 относительно базы TCT
       p2 - смещение ур-ра 2 относительно базы TCT
       p3 - множитель уровнемера 1 к уровню из уровнемера
       p4 - множитель уровнемера 2 к уровню из уровнемера

--------------------------------------------------------
PMPA p1 p2; - адрес (SN) уровнемеров ПМП201 (Сенсор)
PMP p1 p2 p3 p4; - уровень1 0.1мм, температура1 C,
                   уровень2 0.1мм, температура2 C.
PMPO - p1 - смещение ур-ра 1 относительно базы TCT
       p2 - смещение ур-ра 2 относительно базы TCT
       p3 - множитель уровнемера 1 к уровню из уровнемера
       p4 - множитель уровнемера 2 к уровню из уровнемера

GV - отобразить объем по показаниям уровнемеров
GN p1 p2 p3 p4 p5; - рассчитать объем для резервуара p1;
 p1 - номер резервуара 1...9
 p2 - уровень продукта,мм
 p3 - уровень воды,мм
 p4 - плотность,кг/м3
 p5 - температура,С
===============================
 PDL - вывод последних p1 событий
 PDA - вывод событий с p1 по p2

===========================

 CMn - параметры COM портов(n= 1...4): скор,длина,четн,стоп бит
 CP -  тип протокола COM1..3, 0 - ICP,1 - RTU,2 - двоичн
  3 - Передавать в COMx символьную информацию, в конце строки - 0xd.

 TRTU - таймаут ожидания байта RTU,ms
 SCT - время тишины после приема для COM,ms
      если=0 символы не вводятся и не убираются из COMx

 SCANP - параметры сканирования каналов
 p1 - номер COM
 p2 - таймаут,мс
 p3 - максимальный адрес при сканировании,
 p4 - флаг CRC для ICP модулей

 SCAN - автопоиск подключенных ICP/RTU устройств
 MOD - список обнаруженных ICP устройств
 MODn - изменение параметров обнаруженного устройства номер n
 MODNn - изменение имени обнаруженного устройства номер n
 DRV - список драйверов устройств
 DRVn - изменение параметров драйвера номер n
 COM - режим терминального обмена с каналом COM1..3,0 - выход из режима
 SQ  - состояние очередей и статистика COM1...COM3
 CQ  - очистка очередей COM1...COM3

 ECHO - p1-флаг отладки(отображение нераспознанных символов) ,p2-флаг эхо
 HELP - Help по командам ICP
 DE - отобразить регистры ошибок

 CE - очистить ошибки
 WE - сохранить параметры в EEPROM
 RE - читать параметры из EEPROM

 IO -p1 - выходы,hex , p2 - входы, hex

BRD24 - трансляция COM2<->COM4, выход из режима только через выключение питания
BRD34 - трансляция COM3<->COM4

